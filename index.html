<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¤¦</text></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>overflow-observer</title>
    <style>
    :root {
      font-family: system-ui, sans-serif;
    }

    h1 {
      text-align: center;
    }

    overflow-observer {
    }

    body {
      max-width: 1000px;
      margin-inline: auto;

      > * {
        margin-block-start: 2lh;
      }
    }

    #switch ul {
      --_border: 2px solid black;
      
      display: flex;
      list-style: none;
      justify-content: center;
      margin: 0;
      padding: 0;
      gap: 3ch;
      
      /** styles for when overflowing **/
      overflow-observer:state(overflow) & {
        flex-direction: column;
      }
      
      /** styles for when not overflowing **/
      overflow-observer:not(:state(overflow)) & {
        border: 1px solid #aaa;
      }
      
      li {
        min-inline-size: max-content;
        padding: 0.5rem;
        background: #aaa;
      }
    }

    .indicator.y {
      height: 10px;
      overflow: clip;
    }

    .indicator ul {
      display: flex;
      gap: 3ch;
      flex-wrap: nowrap;
      list-style: none;
      overflow: auto;
      position: relative;

      li {
        min-inline-size: max-content;
        padding: 0.5rem;
        background: #aaa;
      }

      overflow-observer:state(overflow) {
        outline: 1px solid red;
      }

      overflow-observer:state(overflowx) & {
        &::before {
          display: block;
          content: "x";
          position: absolute;
          right: 0;
          top: 0;
          bottom: 0;
          height: 100%;
          background: red;
        }
      }

      overflow-observer:state(overflowy) & {
        &::before {
          display: block;
          content: "y";
          position: absolute;
          right: 0;
          left: 0;
          bottom: 0;
          height: 20px;
          background: lime;
        }
      }
    }

    .resizer {
      width: 500px;
      height: 500px;
      resize: both;
      overflow: scroll;
      background: magenta;
      border: 5px solid blue;

      & > * {
        width: 400px;
        height: 400px;
        background: #aaa;
      }

      &:state(overflow) {
        outline: 2px solid lime;
        outline-offset: 2px;
      }

      &:state(overflowinline) {
        border-inline-color: lime;
      }

      &:state(overflowblock) {
        border-block-color: lime;
      }

      &:state(overflowblockstart) {
        border-block-start-style: dashed;
      }
      &:state(overflowblockend) {
        border-block-end-style: dashed;
      }
      &:state(overflowinlineend) {
        border-inline-end-style: dashed;
      }
      &:state(overflowinlinestart) {
        border-inline-start-style: dashed;
      }
    }

    </style>
  </head>
  <body>

    <h1>OverflowObserver</h1>

    <overflow-observer id="observer" class="resizer">
      <div></div>
    </overflow-observer>
    <overflow-observer-states for="observer"></overflow-observer-states>

    <script type="module" src="/demo.js"></script>
  </body>
</html>
